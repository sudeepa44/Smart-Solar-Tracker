#include "p16f84a.inc"
ORG 0
    
CBLOCK 0CH
    COUNT1
    COUNT2
    ENDC

START
    BSF STATUS,5
    CLRF TRISB
    MOVLW B'00011111'
    MOVWF TRISA
    BCF STATUS,5
 
TEST0
    BTFSC PORTA,1
    GOTO TEST1
    CALL CLOCK
    GOTO TEST1
    
    
TEST1
    BTFSC PORTA,2
    GOTO TEST0
    CALL ANTICLOCK
    GOTO TEST0
    
CLOCK
    MOVLW 0xA0
    MOVWF PORTB
    CALL DELAY 
    
    MOVLW 0x60
    MOVWF PORTB
    CALL DELAY
    MOVLW 0x50
    MOVWF PORTB
    CALL DELAY
    MOVLW 0x90
    MOVWF PORTB
    CALL DELAY
    RETURN
    
ANTICLOCK
    MOVLW 0x90
    MOVWF PORTB
    CALL DELAY
    MOVLW 0x50
    MOVWF PORTB
    CALL DELAY
    MOVLW 0x60
    MOVWF PORTB
    CALL DELAY
    MOVLW 0xA0
    MOVWF PORTB
    CALL DELAY
    RETURN
    
DELAY
    DECFSZ COUNT1,1
    GOTO DELAY
    DECFSZ COUNT2,1
    GOTO DELAY
    RETURN
    
    END
    
